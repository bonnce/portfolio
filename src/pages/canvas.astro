---
  
---

<canvas id="cloud-container"></canvas>

<script >
  const {innerHeight, innerWidth} = window
  const canvas = document.getElementById("cloud-container") as HTMLCanvasElement
  const ctx = canvas?.getContext('2d')
  canvas.height = innerHeight
  canvas.width = innerWidth

  interface iPosition {
    x:number,
    y:number
  }

  let mouse: Partial<iPosition>

  canvas.addEventListener('mousemove', (event)=>{
    mouse = {x: event.clientX, y: event.clientY}
  })

  class Cloud {
    position:iPosition
    initPos: iPosition
    velocity: Partial<iPosition>
    width:number
    height:number
    color:string
    constructor(position: iPosition, velocity: Partial<iPosition>, height:number, width:number, color:string){
      this.initPos = position
      this.position = position
      this.velocity = velocity
      this.height = height
      this.width = width
      this.color = color
    }

    draw(ctx: CanvasRenderingContext2D){
      ctx.fillStyle = this.color
      ctx.fillRect(this.position.x,this.position.y, this.width, this.height)
    }

    update(){
      if(this.velocity.x){
        if(this.position.x > canvas.width){
          this.position.x = -this.width
          this.position.y = Math.random() * canvas.height
        }
        this.position.x += this.velocity.x
      } 
      if( mouse?.x && mouse?.y){

        const mouseDistanceX = Math.abs(this.position.x + this.width/2 - mouse.x)
        const centerPosY = this.position.y + this.height / 2
        const mouseDistanceY = centerPosY - mouse.y
        if(mouseDistanceX < this.width && centerPosY < mouse.y + this.height && centerPosY > mouse.y - this.height) {
          this.position.y += mouseDistanceY * .5
        }
      }
    }
  }
  

  const clouds = Array(10).fill(0).map(i => {
      const pos = {
        x:Math.random() * canvas.width,
        y:Math.random() * canvas.height
      }
      const vel = {
        x: Math.random() * 4 + 2,
      }
      return new Cloud(pos, vel, 40, 100, 'green')
    })

  function animate(){
    if(ctx){
        
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Draw
      clouds.forEach(c => {
        c.update();
        c.draw(ctx);
      })
    }
    requestAnimationFrame(animate)
  }

  animate()
</script>